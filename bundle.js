(()=>{"use strict";var e={426:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(537),o=t.n(r),a=t(645),s=t.n(a)()(o());s.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Anton&display=swap);"]),s.push([e.id,":root {\n  --purple: #3B1F2B;\n  --red: #DB162F;\n  --cream: #DBDFAC;\n  --light-blue: #5F758E;\n  --dark-blue: #383961;\n}\n\nbody {\n  background-color: var(--light-blue);\n  color: var(--dark-blue);\n  font-family: 'Anton', sans-serif;\n  text-transform: uppercase;\n}\n\nh1 {\n  font-size: 5rem;\n}\n\n#wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 5%;\n}\n\n.block {\n  text-align: center;\n}\n\nbutton {\n  font-size: 1.25rem;\n  color: var(--cream);\n  background-color: var(--dark-blue);\n  padding: 1em;\n  border: 5px solid var(--purple);\n  cursor: pointer;\n\n  text-transform: uppercase;\n  font-family: 'Anton', sans-serif;\n}\n\n/* Gameboard display */\n.gameboard {\n  border: 10px solid var(--dark-blue);\n  border-radius: 3px;\n  background-color: var(--dark-blue);\n\n  display: grid;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n  gap: 2px;\n\n  width: 40vw;\n  height: 40vw;\n  box-sizing: border-box;\n}\n\n.cell {\n  background-color: white;\n  border-radius: 2px;\n  cursor: crosshair;\n}\n\n#computer .cell {\n  background-color: #bbb;\n}\n\n.cell:hover,\n#computer .cell:hover {\n  background-color: #ddd;\n}\n\n.cell.has-ship {\n  background-color: var(--light-blue);\n}\n\nul.details {\n  display: flex;\n  justify-content: space-evenly;\n  list-style-type: none;\n  font-size: 1.25rem;\n}\n\n.attacked::before {\n  content: '•';\n  color: var(--red);\n  font-size: 2rem;\n  opacity: 0.75;\n}\n\n.has-ship.attacked::before {\n  background-color: var(--red);\n  display: block;\n  height: 100%;\n  content: '';\n  opacity: 0.75;\n  border-radius: 2px;\n}\n\n.has-ship.attacked.sunk::before {\n  animation: 500ms sunk;\n  background-color: var(--purple);\n}\n\n@keyframes sunk {\n  0% {\n    transform: scale(0.1);\n    border-radius: 100%;\n    background-color: var(--red);\n  }\n\n  50% {\n    transform: scale(1.5);\n    border-radius: 100%;\n  }\n\n  100% {\n    transform: scale(1);\n    border-radius: none;\n    background-color: var(--purple);\n  }\n}\n\n#game-over-modal {\n  padding: 2em;\n  background-color: var(--light-blue);\n  border: 5px solid var(--dark-blue);\n  text-align: center;\n}\n\n#game-over-modal h2 {\n  font-size: 2rem;\n  color: var(--cream);\n}","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAEA;EACE,iBAAiB;EACjB,cAAc;EACd,gBAAgB;EAChB,qBAAqB;EACrB,oBAAoB;AACtB;;AAEA;EACE,mCAAmC;EACnC,uBAAuB;EACvB,gCAAgC;EAChC,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,OAAO;AACT;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,kCAAkC;EAClC,YAAY;EACZ,+BAA+B;EAC/B,eAAe;;EAEf,yBAAyB;EACzB,gCAAgC;AAClC;;AAEA,sBAAsB;AACtB;EACE,mCAAmC;EACnC,kBAAkB;EAClB,kCAAkC;;EAElC,aAAa;EACb,gDAAgD;EAChD,QAAQ;;EAER,WAAW;EACX,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,uBAAuB;EACvB,kBAAkB;EAClB,iBAAiB;AACnB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;;EAEE,sBAAsB;AACxB;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,aAAa;EACb,6BAA6B;EAC7B,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,eAAe;EACf,aAAa;AACf;;AAEA;EACE,4BAA4B;EAC5B,cAAc;EACd,YAAY;EACZ,WAAW;EACX,aAAa;EACb,kBAAkB;AACpB;;AAEA;EACE,qBAAqB;EACrB,+BAA+B;AACjC;;AAEA;EACE;IACE,qBAAqB;IACrB,mBAAmB;IACnB,4BAA4B;EAC9B;;EAEA;IACE,qBAAqB;IACrB,mBAAmB;EACrB;;EAEA;IACE,mBAAmB;IACnB,mBAAmB;IACnB,+BAA+B;EACjC;AACF;;AAEA;EACE,YAAY;EACZ,mCAAmC;EACnC,kCAAkC;EAClC,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,mBAAmB;AACrB",sourcesContent:["@import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');\n\n:root {\n  --purple: #3B1F2B;\n  --red: #DB162F;\n  --cream: #DBDFAC;\n  --light-blue: #5F758E;\n  --dark-blue: #383961;\n}\n\nbody {\n  background-color: var(--light-blue);\n  color: var(--dark-blue);\n  font-family: 'Anton', sans-serif;\n  text-transform: uppercase;\n}\n\nh1 {\n  font-size: 5rem;\n}\n\n#wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 5%;\n}\n\n.block {\n  text-align: center;\n}\n\nbutton {\n  font-size: 1.25rem;\n  color: var(--cream);\n  background-color: var(--dark-blue);\n  padding: 1em;\n  border: 5px solid var(--purple);\n  cursor: pointer;\n\n  text-transform: uppercase;\n  font-family: 'Anton', sans-serif;\n}\n\n/* Gameboard display */\n.gameboard {\n  border: 10px solid var(--dark-blue);\n  border-radius: 3px;\n  background-color: var(--dark-blue);\n\n  display: grid;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n  gap: 2px;\n\n  width: 40vw;\n  height: 40vw;\n  box-sizing: border-box;\n}\n\n.cell {\n  background-color: white;\n  border-radius: 2px;\n  cursor: crosshair;\n}\n\n#computer .cell {\n  background-color: #bbb;\n}\n\n.cell:hover,\n#computer .cell:hover {\n  background-color: #ddd;\n}\n\n.cell.has-ship {\n  background-color: var(--light-blue);\n}\n\nul.details {\n  display: flex;\n  justify-content: space-evenly;\n  list-style-type: none;\n  font-size: 1.25rem;\n}\n\n.attacked::before {\n  content: '•';\n  color: var(--red);\n  font-size: 2rem;\n  opacity: 0.75;\n}\n\n.has-ship.attacked::before {\n  background-color: var(--red);\n  display: block;\n  height: 100%;\n  content: '';\n  opacity: 0.75;\n  border-radius: 2px;\n}\n\n.has-ship.attacked.sunk::before {\n  animation: 500ms sunk;\n  background-color: var(--purple);\n}\n\n@keyframes sunk {\n  0% {\n    transform: scale(0.1);\n    border-radius: 100%;\n    background-color: var(--red);\n  }\n\n  50% {\n    transform: scale(1.5);\n    border-radius: 100%;\n  }\n\n  100% {\n    transform: scale(1);\n    border-radius: none;\n    background-color: var(--purple);\n  }\n}\n\n#game-over-modal {\n  padding: 2em;\n  background-color: var(--light-blue);\n  border: 5px solid var(--dark-blue);\n  text-align: center;\n}\n\n#game-over-modal h2 {\n  font-size: 2rem;\n  color: var(--cream);\n}"],sourceRoot:""}]);const i=s},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),n.push(d))}},n}},537:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(o," */");return[n].concat([a]).join("\n")}return[n].join("\n")}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},s=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],d=a[l]||0,A="".concat(l," ").concat(d);a[l]=d+1;var u=t(A),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)n[u].references++,n[u].updater(p);else{var m=o(p,r);r.byIndex=i,n.splice(i,0,{identifier:A,updater:m,references:1})}s.push(A)}return s}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var i=t(a[s]);n[i].references--}for(var c=r(e,o),l=0;l<a.length;l++){var d=t(a[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}a=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0,(()=>{var e=t(379),n=t.n(e),r=t(795),o=t.n(r),a=t(569),s=t.n(a),i=t(565),c=t.n(i),l=t(216),d=t.n(l),A=t(589),u=t.n(A),p=t(426),m={};m.styleTagTransform=u(),m.setAttributes=c(),m.insert=s().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=d(),n()(p.Z,m),p.Z&&p.Z.locals&&p.Z.locals;class h{constructor(e,n){this.id=e,this.length=n,this.hits=0}hit(){this.hits<=this.length&&(this.hits+=1)}get isSunk(){return this.hits===this.length}}class f{constructor(e,n){this.dimensions=e,this.board=this.generateBoard(e),this.ships=[],this.elementId=n}generateBoard(e){const n=[];for(let t=0;t<e;t+=1){const r=[];for(let n=0;n<e;n+=1){const e=new b(t,n);r.push(e)}n.push(r)}return n}generateShips(e){for(let n=0;n<e.length;n++){let t,r,o;do{t=[Math.floor(Math.random()*this.dimensions),Math.floor(Math.random()*this.dimensions)],r=Boolean(Math.round(Math.random())),o=this.isValidPlacement(t,e[n],r)}while(!1===o);this.placeShip(t,e[n],r)}}isValidPlacement([e,n],t,r){if(r){if(e+t>this.dimensions)return!1;for(let r=e;r<e+t;r+=1)if(!0===this.board[r][n].hasShip)return!1}else{if(n+t>this.dimensions)return!1;for(let r=n;r<n+t;r+=1)if(!0===this.board[e][r].hasShip)return!1}return!0}placeShip([e,n],t,r){if(!1===this.isValidPlacement([e,n],t,r))return;const o=Math.floor(1e5*Math.random());if(r)for(let r=e;r<e+t;r+=1)this.board[r][n].hasShip=!0,this.board[r][n].shipId=o;else for(let r=n;r<n+t;r+=1)this.board[e][r].hasShip=!0,this.board[e][r].shipId=o;this.ships.push(new h(o,t))}receiveAttack([e,n]){const t=this.board[e][n];let r=!1,o=!1,a={};if(t.beenAttacked)throw new Error("Duplicate attack");return t.beenAttacked=!0,t.hasShip&&(r=!0,a=this.ships.find((e=>e.id===t.shipId)),a.hit(),!0===a.isSunk&&(o=!0)),this.renderAttack([e,n],r,o,a),[r,o]}renderAttack(e,n,t,r){const o=document.querySelector(`#${this.elementId} [data-coordinates='${e.toString()}']`);if(o.classList.add("attacked"),n&&(o.classList.add("has-ship"),o.dataset.ship=r.id),t){const e=document.querySelectorAll(`[data-ship='${r.id}']`);let n=0;e.forEach((e=>{setTimeout((()=>{e.classList.add("sunk")}),n),n+=200}))}document.querySelector(`#${this.elementId} li.ships`).textContent=`Remaining ships: ${this.remainingShips}`}get remainingShips(){return this.ships.filter((e=>!e.isSunk)).length}get allSunk(){return this.ships.every((e=>e.isSunk))}}class b{constructor(e,n){this.coordinates=[e,n],this.hasShip=!1,this.beenAttacked=!1}}class g{constructor(e,n=!1){this.name=e;const t=this.name.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();this.gameboard=new f(10,t),this.opponent=null,this.myTurn=n,this.previousMoves=new Set,this.isComputer=!1}attackOpponent([e,n]){if(!1===this.myTurn)throw new Error("Not my turn!");const t=this.gameboard.dimensions;if(e<0||e>=t||n<0||n>=t)throw new Error("Out of bounds");return this.myTurn=!1,this.opponent.myTurn=!0,this.opponent.gameboard.receiveAttack([e,n])}generateAiMove(){let e;do{e=[Math.floor(Math.random()*this.gameboard.dimensions),Math.floor(Math.random()*this.gameboard.dimensions)]}while(this.previousMoves.has(e.toString()));return this.previousMoves.add(e.toString()),this.attackOpponent(e)}get totalMoves(){let e=this.opponent.gameboard.board.flat();return e=e.filter((e=>!0===e.beenAttacked)),e.length}}class C{constructor(){this.playerOne=new g("You",!0),this.playerTwo=new g("Computer"),this.gameOver=!1,this.playerOne.opponent=this.playerTwo,this.playerTwo.opponent=this.playerOne,this.playerTwo.isComputer=!0}playGame(){document.addEventListener("click",(()=>{this.gameOver||this.playTurn()}))}playTurn(){this.playerOne;const e=this.playerTwo;this.calculateGameOver(),this.gameOver||(e.myTurn&&e.generateAiMove(),this.calculateGameOver())}calculateGameOver(){const e=this.playerOne,n=this.playerTwo;n.gameboard.allSunk?(this.gameOver=!0,this.announceGameOver(e,n)):e.gameboard.allSunk&&(this.gameOver=!0,this.announceGameOver(n,e))}announceGameOver(e,n){setTimeout((()=>{const n=document.querySelector("#game-over-modal");document.querySelector("#winner-text").textContent=`${e.name} won in ${e.totalMoves} moves with ${e.gameboard.remainingShips} remaining ships.`,n.showModal()}),500)}}let v;function E(){const e=document.querySelector("#wrapper");for(;e.firstChild;)e.removeChild(e.firstChild);const n=B(v.playerOne),t=B(v.playerTwo),r=function(){const e=document.createElement("dialog");e.setAttribute("id","game-over-modal");const n=document.createElement("h2");n.textContent="Game Over!";const t=document.createElement("h3");t.setAttribute("id","winner-text");const r=document.createElement("button");return r.setAttribute("id","new-game-button"),r.textContent="New Game",r.addEventListener("click",(e=>{document.querySelector("#game-over-modal"),v=new C,v.playerOne.gameboard.generateShips([5,4,3,3,2]),v.playerTwo.gameboard.generateShips([5,4,3,3,2]),v.playGame(),E()})),e.append(n,t,r),e}();e.append(n,t,r)}function B(e){const n=document.createElement("div");n.setAttribute("class","block"),n.setAttribute("id",e.name.replace(/[^a-zA-Z0-9]/g,"").toLowerCase());const t=document.createElement("h2");t.textContent=e.name;const r=document.createElement("div");r.setAttribute("class","gameboard");const o=e.gameboard.dimensions;for(let n=0;n<o;n+=1)for(let t=0;t<o;t+=1){const o=e.gameboard.board[n][t],a=document.createElement("div");a.setAttribute("class","cell"),a.dataset.coordinates=`${n},${t}`,!1===e.isComputer&&o.hasShip&&(a.classList.add("has-ship"),a.dataset.ship=o.shipId),!0===e.isComputer&&a.addEventListener("click",(r=>{e.opponent.attackOpponent([n,t])})),r.append(a)}const a=document.createElement("ul");a.setAttribute("class","details");const s=document.createElement("li");return s.setAttribute("class","ships"),s.textContent=`Remaining ships: ${e.gameboard.ships.length}`,a.append(s),n.append(t,r,a),n}!function(){const e=document.querySelector("body"),n=document.createElement("div");n.setAttribute("id","wrapper");const t=document.createElement("div");t.setAttribute("class","block");const r=document.createElement("h1");r.textContent="Battleship";const o=document.createElement("button");o.setAttribute("id","new-game-button"),o.textContent="New Game",o.addEventListener("click",(e=>{v=new C,v.playerOne.gameboard.generateShips([5,4,3,3,2]),v.playerTwo.gameboard.generateShips([5,4,3,3,2]),v.playGame(),E()})),t.append(r,o),n.append(t),e.append(n)}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly8wNy10b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vMDctdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vMDctdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vMDctdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vMDctdG9wLWJhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovLzA3LXRvcC1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLzA3LXRvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLzA3LXRvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLzA3LXRvcC1iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL3NyYy9zdHlsZS5jc3M/NzE2MyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovLzA3LXRvcC1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vMDctdG9wLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZS5qcyIsIndlYnBhY2s6Ly8wNy10b3AtYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCJAaW1wb3J0IHVybChodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUFudG9uJmRpc3BsYXk9c3dhcCk7XCJdKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgOnJvb3Qge1xuICAtLXB1cnBsZTogIzNCMUYyQjtcbiAgLS1yZWQ6ICNEQjE2MkY7XG4gIC0tY3JlYW06ICNEQkRGQUM7XG4gIC0tbGlnaHQtYmx1ZTogIzVGNzU4RTtcbiAgLS1kYXJrLWJsdWU6ICMzODM5NjE7XG59XG5cbmJvZHkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodC1ibHVlKTtcbiAgY29sb3I6IHZhcigtLWRhcmstYmx1ZSk7XG4gIGZvbnQtZmFtaWx5OiAnQW50b24nLCBzYW5zLXNlcmlmO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xufVxuXG5oMSB7XG4gIGZvbnQtc2l6ZTogNXJlbTtcbn1cblxuI3dyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiA1JTtcbn1cblxuLmJsb2NrIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24ge1xuICBmb250LXNpemU6IDEuMjVyZW07XG4gIGNvbG9yOiB2YXIoLS1jcmVhbSk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcmstYmx1ZSk7XG4gIHBhZGRpbmc6IDFlbTtcbiAgYm9yZGVyOiA1cHggc29saWQgdmFyKC0tcHVycGxlKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGZvbnQtZmFtaWx5OiAnQW50b24nLCBzYW5zLXNlcmlmO1xufVxuXG4vKiBHYW1lYm9hcmQgZGlzcGxheSAqL1xuLmdhbWVib2FyZCB7XG4gIGJvcmRlcjogMTBweCBzb2xpZCB2YXIoLS1kYXJrLWJsdWUpO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcmstYmx1ZSk7XG5cbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZTogcmVwZWF0KDEwLCAxZnIpIC8gcmVwZWF0KDEwLCAxZnIpO1xuICBnYXA6IDJweDtcblxuICB3aWR0aDogNDB2dztcbiAgaGVpZ2h0OiA0MHZ3O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4uY2VsbCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIGN1cnNvcjogY3Jvc3NoYWlyO1xufVxuXG4jY29tcHV0ZXIgLmNlbGwge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmJiO1xufVxuXG4uY2VsbDpob3ZlcixcbiNjb21wdXRlciAuY2VsbDpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNkZGQ7XG59XG5cbi5jZWxsLmhhcy1zaGlwIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtYmx1ZSk7XG59XG5cbnVsLmRldGFpbHMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICBmb250LXNpemU6IDEuMjVyZW07XG59XG5cbi5hdHRhY2tlZDo6YmVmb3JlIHtcbiAgY29udGVudDogJ+KAoic7XG4gIGNvbG9yOiB2YXIoLS1yZWQpO1xuICBmb250LXNpemU6IDJyZW07XG4gIG9wYWNpdHk6IDAuNzU7XG59XG5cbi5oYXMtc2hpcC5hdHRhY2tlZDo6YmVmb3JlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcmVkKTtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGhlaWdodDogMTAwJTtcbiAgY29udGVudDogJyc7XG4gIG9wYWNpdHk6IDAuNzU7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbn1cblxuLmhhcy1zaGlwLmF0dGFja2VkLnN1bms6OmJlZm9yZSB7XG4gIGFuaW1hdGlvbjogNTAwbXMgc3VuaztcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHVycGxlKTtcbn1cblxuQGtleWZyYW1lcyBzdW5rIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMC4xKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJlZCk7XG4gIH1cblxuICA1MCUge1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMS41KTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgICBib3JkZXItcmFkaXVzOiBub25lO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXB1cnBsZSk7XG4gIH1cbn1cblxuI2dhbWUtb3Zlci1tb2RhbCB7XG4gIHBhZGRpbmc6IDJlbTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtYmx1ZSk7XG4gIGJvcmRlcjogNXB4IHNvbGlkIHZhcigtLWRhcmstYmx1ZSk7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuI2dhbWUtb3Zlci1tb2RhbCBoMiB7XG4gIGZvbnQtc2l6ZTogMnJlbTtcbiAgY29sb3I6IHZhcigtLWNyZWFtKTtcbn1gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBRUE7RUFDRSxpQkFBaUI7RUFDakIsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixxQkFBcUI7RUFDckIsb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0UsbUNBQW1DO0VBQ25DLHVCQUF1QjtFQUN2QixnQ0FBZ0M7RUFDaEMseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0VBQ25CLE9BQU87QUFDVDs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsa0NBQWtDO0VBQ2xDLFlBQVk7RUFDWiwrQkFBK0I7RUFDL0IsZUFBZTs7RUFFZix5QkFBeUI7RUFDekIsZ0NBQWdDO0FBQ2xDOztBQUVBLHNCQUFzQjtBQUN0QjtFQUNFLG1DQUFtQztFQUNuQyxrQkFBa0I7RUFDbEIsa0NBQWtDOztFQUVsQyxhQUFhO0VBQ2IsZ0RBQWdEO0VBQ2hELFFBQVE7O0VBRVIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTs7RUFFRSxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxtQ0FBbUM7QUFDckM7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsNkJBQTZCO0VBQzdCLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsY0FBYztFQUNkLFlBQVk7RUFDWixXQUFXO0VBQ1gsYUFBYTtFQUNiLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQiwrQkFBK0I7QUFDakM7O0FBRUE7RUFDRTtJQUNFLHFCQUFxQjtJQUNyQixtQkFBbUI7SUFDbkIsNEJBQTRCO0VBQzlCOztFQUVBO0lBQ0UscUJBQXFCO0lBQ3JCLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLG1CQUFtQjtJQUNuQixtQkFBbUI7SUFDbkIsK0JBQStCO0VBQ2pDO0FBQ0Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osbUNBQW1DO0VBQ25DLGtDQUFrQztFQUNsQyxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIkBpbXBvcnQgdXJsKCdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUFudG9uJmRpc3BsYXk9c3dhcCcpO1xcblxcbjpyb290IHtcXG4gIC0tcHVycGxlOiAjM0IxRjJCO1xcbiAgLS1yZWQ6ICNEQjE2MkY7XFxuICAtLWNyZWFtOiAjREJERkFDO1xcbiAgLS1saWdodC1ibHVlOiAjNUY3NThFO1xcbiAgLS1kYXJrLWJsdWU6ICMzODM5NjE7XFxufVxcblxcbmJvZHkge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtYmx1ZSk7XFxuICBjb2xvcjogdmFyKC0tZGFyay1ibHVlKTtcXG4gIGZvbnQtZmFtaWx5OiAnQW50b24nLCBzYW5zLXNlcmlmO1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG59XFxuXFxuaDEge1xcbiAgZm9udC1zaXplOiA1cmVtO1xcbn1cXG5cXG4jd3JhcHBlciB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgZ2FwOiA1JTtcXG59XFxuXFxuLmJsb2NrIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuYnV0dG9uIHtcXG4gIGZvbnQtc2l6ZTogMS4yNXJlbTtcXG4gIGNvbG9yOiB2YXIoLS1jcmVhbSk7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrLWJsdWUpO1xcbiAgcGFkZGluZzogMWVtO1xcbiAgYm9yZGVyOiA1cHggc29saWQgdmFyKC0tcHVycGxlKTtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG5cXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XFxuICBmb250LWZhbWlseTogJ0FudG9uJywgc2Fucy1zZXJpZjtcXG59XFxuXFxuLyogR2FtZWJvYXJkIGRpc3BsYXkgKi9cXG4uZ2FtZWJvYXJkIHtcXG4gIGJvcmRlcjogMTBweCBzb2xpZCB2YXIoLS1kYXJrLWJsdWUpO1xcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFyay1ibHVlKTtcXG5cXG4gIGRpc3BsYXk6IGdyaWQ7XFxuICBncmlkLXRlbXBsYXRlOiByZXBlYXQoMTAsIDFmcikgLyByZXBlYXQoMTAsIDFmcik7XFxuICBnYXA6IDJweDtcXG5cXG4gIHdpZHRoOiA0MHZ3O1xcbiAgaGVpZ2h0OiA0MHZ3O1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxuLmNlbGwge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxuICBib3JkZXItcmFkaXVzOiAycHg7XFxuICBjdXJzb3I6IGNyb3NzaGFpcjtcXG59XFxuXFxuI2NvbXB1dGVyIC5jZWxsIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNiYmI7XFxufVxcblxcbi5jZWxsOmhvdmVyLFxcbiNjb21wdXRlciAuY2VsbDpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkO1xcbn1cXG5cXG4uY2VsbC5oYXMtc2hpcCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodC1ibHVlKTtcXG59XFxuXFxudWwuZGV0YWlscyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XFxuICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XFxuICBmb250LXNpemU6IDEuMjVyZW07XFxufVxcblxcbi5hdHRhY2tlZDo6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6ICfigKInO1xcbiAgY29sb3I6IHZhcigtLXJlZCk7XFxuICBmb250LXNpemU6IDJyZW07XFxuICBvcGFjaXR5OiAwLjc1O1xcbn1cXG5cXG4uaGFzLXNoaXAuYXR0YWNrZWQ6OmJlZm9yZSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1yZWQpO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBjb250ZW50OiAnJztcXG4gIG9wYWNpdHk6IDAuNzU7XFxuICBib3JkZXItcmFkaXVzOiAycHg7XFxufVxcblxcbi5oYXMtc2hpcC5hdHRhY2tlZC5zdW5rOjpiZWZvcmUge1xcbiAgYW5pbWF0aW9uOiA1MDBtcyBzdW5rO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHVycGxlKTtcXG59XFxuXFxuQGtleWZyYW1lcyBzdW5rIHtcXG4gIDAlIHtcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwLjEpO1xcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1yZWQpO1xcbiAgfVxcblxcbiAgNTAlIHtcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxLjUpO1xcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xcbiAgfVxcblxcbiAgMTAwJSB7XFxuICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XFxuICAgIGJvcmRlci1yYWRpdXM6IG5vbmU7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXB1cnBsZSk7XFxuICB9XFxufVxcblxcbiNnYW1lLW92ZXItbW9kYWwge1xcbiAgcGFkZGluZzogMmVtO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtYmx1ZSk7XFxuICBib3JkZXI6IDVweCBzb2xpZCB2YXIoLS1kYXJrLWJsdWUpO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4jZ2FtZS1vdmVyLW1vZGFsIGgyIHtcXG4gIGZvbnQtc2l6ZTogMnJlbTtcXG4gIGNvbG9yOiB2YXIoLS1jcmVhbSk7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXNba11bMF07XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBtb2R1bGVzLmxlbmd0aDsgX2srKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfa10pO1xuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBsYXllciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1bNV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTaGlwIHtcbiAgY29uc3RydWN0b3IoaWQsIGxlbmd0aCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICB0aGlzLmhpdHMgPSAwO1xuICB9XG5cbiAgaGl0KCkge1xuICAgIGlmICh0aGlzLmhpdHMgPD0gdGhpcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuaGl0cyArPSAxO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc1N1bmsoKSB7XG4gICAgaWYgKHRoaXMuaGl0cyA9PT0gdGhpcy5sZW5ndGgpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSIsImltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZWJvYXJkIHtcbiAgY29uc3RydWN0b3IoZGltZW5zaW9ucywgZWxlbWVudElkKSB7XG4gICAgdGhpcy5kaW1lbnNpb25zID0gZGltZW5zaW9ucztcbiAgICB0aGlzLmJvYXJkID0gdGhpcy5nZW5lcmF0ZUJvYXJkKGRpbWVuc2lvbnMpO1xuICAgIHRoaXMuc2hpcHMgPSBbXTtcbiAgICB0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcbiAgfVxuXG4gIGdlbmVyYXRlQm9hcmQoZGltZW5zaW9ucykge1xuICAgIGNvbnN0IGJvYXJkID0gW107XG5cbiAgICAvLyBDcmVhdGUgYXJyYXkgb2YgY29sdW1uc1xuICAgIGZvciAobGV0IGk9MDsgaTxkaW1lbnNpb25zOyBpKz0xKSB7XG4gICAgICBjb25zdCBjb2x1bW4gPSBbXTtcblxuICAgICAgLy8gSW4gZWFjaCBjb2x1bW4sIGNyZWF0ZSBhcnJheSBvZiBjZWxsc1xuICAgICAgZm9yIChsZXQgaj0wOyBqPGRpbWVuc2lvbnM7IGorPTEpIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsKGksIGopO1xuICAgICAgICBjb2x1bW4ucHVzaChjZWxsKTtcbiAgICAgIH1cblxuICAgICAgYm9hcmQucHVzaChjb2x1bW4pO1xuICAgIH1cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH1cbiAgXG4gIGdlbmVyYXRlU2hpcHMoc2hpcExpc3QpIHtcbiAgICBmb3IgKGxldCBpPTA7IGk8c2hpcExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCByYW5kQ29vcmRpbmF0ZXM7XG4gICAgICBsZXQgcmFuZFJvdGF0ZTtcbiAgICAgIGxldCBwbGFjZW1lbnRSZXN1bHQ7XG5cbiAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSBzaGlwc1xuICAgICAgZG8ge1xuICAgICAgICByYW5kQ29vcmRpbmF0ZXMgPSBbXG4gICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5kaW1lbnNpb25zKSxcbiAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmRpbWVuc2lvbnMpLFxuICAgICAgICBdO1xuICAgICAgICByYW5kUm90YXRlID0gQm9vbGVhbihNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpKTtcblxuICAgICAgICBwbGFjZW1lbnRSZXN1bHQgPSB0aGlzLmlzVmFsaWRQbGFjZW1lbnQocmFuZENvb3JkaW5hdGVzLCBzaGlwTGlzdFtpXSwgcmFuZFJvdGF0ZSk7XG5cbiAgICAgICAgLy8gSWYgdGhleSBnZW5lcmF0ZSBlcnJvcnMsIHJlZ2VuZXJhdGVcbiAgICAgIH0gd2hpbGUgKHBsYWNlbWVudFJlc3VsdCA9PT0gZmFsc2UpO1xuICAgICAgdGhpcy5wbGFjZVNoaXAocmFuZENvb3JkaW5hdGVzLCBzaGlwTGlzdFtpXSwgcmFuZFJvdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgaXNWYWxpZFBsYWNlbWVudChbeCwgeV0sIHNoaXBMZW5ndGgsIGhvcml6b250YWwpIHtcbiAgICBpZiAoaG9yaXpvbnRhbCkgeyAvLyBWYWxpZGF0ZSBob3Jpem9udGFsIHNoaXBcbiAgICAgIC8vIFRlc3QgaWYgb3V0IG9mIGJvdW5kc1xuICAgICAgaWYgKHggKyBzaGlwTGVuZ3RoID4gdGhpcy5kaW1lbnNpb25zKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIFRlc3QgZm9yIG92ZXJsYXAgd2l0aCBleGlzdGluZyBzaGlwXG4gICAgICBmb3IgKGxldCBpPXg7IGk8KHggKyBzaGlwTGVuZ3RoKTsgaSArPSAxKXtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbaV1beV0uaGFzU2hpcCA9PT0gdHJ1ZSkgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gIH0gZWxzZSB7IC8vIFZhbGlkYXRlIHZlcnRpY2FsIHNoaXBcbiAgICAgIC8vIFRlc3QgaWYgb3V0IG9mIGJvdW5kc1xuICAgICAgaWYgKCh5ICsgc2hpcExlbmd0aCkgPiB0aGlzLmRpbWVuc2lvbnMpIHJldHVybiBmYWxzZTsgLy8gT3V0IG9mIGJvdW5kc1xuXG4gICAgICAvLyBUZXN0IGZvciBvdmVybGFwIHdpdGggZXhpc3Rpbmcgc2hpcFxuICAgICAgZm9yIChsZXQgaT15OyBpPCh5ICsgc2hpcExlbmd0aCk7IGkgKz0gMSl7XG4gICAgICAgIGlmICh0aGlzLmJvYXJkW3hdW2ldLmhhc1NoaXAgPT09IHRydWUpIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHBsYWNlU2hpcChbeCwgeV0sIHNoaXBMZW5ndGgsIGhvcml6b250YWwpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkUGxhY2VtZW50KFt4LCB5XSwgc2hpcExlbmd0aCwgaG9yaXpvbnRhbCkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBcblxuICAgIGNvbnN0IGlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwKTtcblxuICAgIC8vIFBsYWNlIGhvcml6b250YWwgc2hpcFxuICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICBmb3IgKGxldCBpPXg7IGk8KHggKyBzaGlwTGVuZ3RoKTsgaSArPSAxKXtcbiAgICAgICAgdGhpcy5ib2FyZFtpXVt5XS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ib2FyZFtpXVt5XS5zaGlwSWQgPSBpZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBQbGFjZSB2ZXJ0aWNhbCBzaGlwXG4gICAgICBmb3IgKGxldCBpPXk7IGk8KHkgKyBzaGlwTGVuZ3RoKTsgaSArPSAxKXtcbiAgICAgICAgdGhpcy5ib2FyZFt4XVtpXS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ib2FyZFt4XVtpXS5zaGlwSWQgPSBpZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgc2hpcCBvYmplY3RzXG4gICAgdGhpcy5zaGlwcy5wdXNoKG5ldyBTaGlwKGlkLCBzaGlwTGVuZ3RoKSk7XG4gIH1cblxuICByZWNlaXZlQXR0YWNrKFt4LCB5XSkge1xuXG4gICAgY29uc3QgYXR0YWNrZWRDZWxsID0gdGhpcy5ib2FyZFt4XVt5XTtcbiAgICBsZXQgaGl0ID0gZmFsc2U7XG4gICAgbGV0IHN1bmsgPSBmYWxzZTtcbiAgICBsZXQgaGl0U2hpcCA9IHt9O1xuXG4gICAgLy8gSWYgYWxyZWFkeSBhdHRhY2tlZCwgcmVqZWN0XG4gICAgaWYgKGF0dGFja2VkQ2VsbC5iZWVuQXR0YWNrZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBhdHRhY2tcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF0dGFja2VkQ2VsbC5iZWVuQXR0YWNrZWQgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBzaGlwLCBmbGFnIGEgaGl0XG4gICAgaWYgKGF0dGFja2VkQ2VsbC5oYXNTaGlwKSB7XG4gICAgICBoaXQgPSB0cnVlO1xuICAgICAgaGl0U2hpcCA9IHRoaXMuc2hpcHMuZmluZChzaGlwID0+IHNoaXAuaWQgPT09IGF0dGFja2VkQ2VsbC5zaGlwSWQpO1xuICAgICAgaGl0U2hpcC5oaXQoKTtcblxuICAgICAgaWYgKGhpdFNoaXAuaXNTdW5rID09PSB0cnVlKSB7XG4gICAgICAgIHN1bmsgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyQXR0YWNrKFt4LCB5XSwgaGl0LCBzdW5rLCBoaXRTaGlwKTtcbiAgICByZXR1cm4gW2hpdCwgc3Vua107XG4gIH1cblxuICByZW5kZXJBdHRhY2soY29vcmRpbmF0ZXMsIGhpdCwgc3Vuaywgc2hpcCkge1xuICAgIGNvbnN0IGRvbUNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLmVsZW1lbnRJZH0gW2RhdGEtY29vcmRpbmF0ZXM9JyR7Y29vcmRpbmF0ZXMudG9TdHJpbmcoKX0nXWApO1xuICAgIGRvbUNlbGwuY2xhc3NMaXN0LmFkZChcImF0dGFja2VkXCIpO1xuICAgIFxuICAgIGlmIChoaXQpIHtcbiAgICAgIGRvbUNlbGwuY2xhc3NMaXN0LmFkZChcImhhcy1zaGlwXCIpO1xuICAgICAgZG9tQ2VsbC5kYXRhc2V0LnNoaXAgPSBzaGlwLmlkO1xuICAgIH0gXG5cbiAgICAvLyBBZGQgY2FzY2FkaW5nIGV4cGxvc2lvbiBhbmltYXRpb24gd2hlbiBzaGlwIGlzIHN1bmtcbiAgICBpZiAoc3Vuaykge1xuICAgICAgY29uc3Qgc2hpcENlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtc2hpcD0nJHtzaGlwLmlkfSddYCk7XG4gICAgICBsZXQgZGVsYXkgPSAwO1xuICAgICAgc2hpcENlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcInN1bmtcIik7XG4gICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgZGVsYXkgKz0gMjAwO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLmVsZW1lbnRJZH0gbGkuc2hpcHNgKTtcbiAgICBzaGlwcy50ZXh0Q29udGVudCA9IGBSZW1haW5pbmcgc2hpcHM6ICR7dGhpcy5yZW1haW5pbmdTaGlwc31gO1xuICB9XG5cbiAgZ2V0IHJlbWFpbmluZ1NoaXBzKCkge1xuICAgIHJldHVybiB0aGlzLnNoaXBzLmZpbHRlcihzaGlwID0+ICFzaGlwLmlzU3VuaykubGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGFsbFN1bmsoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLmlzU3Vuayk7XG4gIH1cbn1cblxuY2xhc3MgQ2VsbCB7XG4gIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICB0aGlzLmNvb3JkaW5hdGVzID0gW3gsIHldO1xuICAgIHRoaXMuaGFzU2hpcCA9IGZhbHNlO1xuICAgIHRoaXMuYmVlbkF0dGFja2VkID0gZmFsc2U7XG4gIH1cbn1cbiIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIG15VHVybiA9IGZhbHNlKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgIGNvbnN0IG5hbWVJZCA9IHRoaXMubmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJycpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICB0aGlzLmdhbWVib2FyZCA9IG5ldyBHYW1lYm9hcmQoMTAsIG5hbWVJZCk7XG4gICAgdGhpcy5vcHBvbmVudCA9IG51bGw7XG4gICAgdGhpcy5teVR1cm4gPSBteVR1cm47XG4gICAgdGhpcy5wcmV2aW91c01vdmVzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuaXNDb21wdXRlciA9IGZhbHNlO1xuICB9XG5cbiAgYXR0YWNrT3Bwb25lbnQoW3gsIHldKSB7XG4gICAgaWYgKHRoaXMubXlUdXJuID09PSBmYWxzZSkgdGhyb3cgbmV3IEVycm9yKFwiTm90IG15IHR1cm4hXCIpO1xuXG4gICAgLy8gVmFsaWRhdGUgY29vcmRpbmF0ZXMgYXJlIGluIGJvdW5kc1xuICAgIGNvbnN0IG1heCA9IHRoaXMuZ2FtZWJvYXJkLmRpbWVuc2lvbnM7XG4gICAgaWYgKHggPCAwIHx8IHggPj0gbWF4IHx8IHkgPCAwIHx8IHkgPj0gbWF4KSB0aHJvdyBuZXcgRXJyb3IoXCJPdXQgb2YgYm91bmRzXCIpO1xuXG4gICAgdGhpcy5teVR1cm4gPSBmYWxzZTtcbiAgICB0aGlzLm9wcG9uZW50Lm15VHVybiA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXMub3Bwb25lbnQuZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soW3gsIHldKTs7XG4gIH1cblxuICBnZW5lcmF0ZUFpTW92ZSgpIHtcbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgbW92ZVxuICAgIGxldCByYW5kb21Db29yZHM7XG4gICAgZG8ge1xuICAgICAgbGV0IHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmdhbWVib2FyZC5kaW1lbnNpb25zKTtcbiAgICAgIGxldCByYW5kb21ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5nYW1lYm9hcmQuZGltZW5zaW9ucyk7XG4gICAgICByYW5kb21Db29yZHMgPSBbcmFuZG9tWCwgcmFuZG9tWV07XG4gICAgfSB3aGlsZSAodGhpcy5wcmV2aW91c01vdmVzLmhhcyhyYW5kb21Db29yZHMudG9TdHJpbmcoKSkpO1xuXG4gICAgLy8gU3RvcmUgdW5pcXVlIG1vdmVcbiAgICB0aGlzLnByZXZpb3VzTW92ZXMuYWRkKHJhbmRvbUNvb3Jkcy50b1N0cmluZygpKTtcblxuICAgIHJldHVybiB0aGlzLmF0dGFja09wcG9uZW50KHJhbmRvbUNvb3Jkcyk7XG4gIH1cblxuICBnZXQgdG90YWxNb3ZlcygpIHtcbiAgICBsZXQgY2VsbHMgPSB0aGlzLm9wcG9uZW50LmdhbWVib2FyZC5ib2FyZC5mbGF0KCk7XG4gICAgY2VsbHMgPSBjZWxscy5maWx0ZXIoY2VsbCA9PiBjZWxsLmJlZW5BdHRhY2tlZCA9PT0gdHJ1ZSk7XG4gICAgcmV0dXJuIGNlbGxzLmxlbmd0aDtcbiAgfVxufVxuIiwiaW1wb3J0IFBsYXllciBmcm9tIFwiLi9wbGF5ZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucGxheWVyT25lID0gbmV3IFBsYXllcihcIllvdVwiLCB0cnVlKTtcbiAgICB0aGlzLnBsYXllclR3byA9IG5ldyBQbGF5ZXIoXCJDb21wdXRlclwiKTtcbiAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XG4gICAgXG4gICAgdGhpcy5wbGF5ZXJPbmUub3Bwb25lbnQgPSB0aGlzLnBsYXllclR3bztcbiAgICB0aGlzLnBsYXllclR3by5vcHBvbmVudCA9IHRoaXMucGxheWVyT25lO1xuICAgIHRoaXMucGxheWVyVHdvLmlzQ29tcHV0ZXIgPSB0cnVlO1xuICB9XG5cbiAgcGxheUdhbWUoKSB7XG4gICAgLy8gQWZ0ZXIgZWFjaCBjbGljaywgY2FsY3VsYXRlIG5leHQgbW92ZVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZ2FtZU92ZXIpIHtcbiAgICAgICAgdGhpcy5wbGF5VHVybigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcGxheVR1cm4oKSB7XG4gICAgY29uc3QgaHVtYW4gPSB0aGlzLnBsYXllck9uZTtcbiAgICBjb25zdCBjb21wdXRlciA9IHRoaXMucGxheWVyVHdvO1xuXG4gICAgdGhpcy5jYWxjdWxhdGVHYW1lT3ZlcigpO1xuXG4gICAgaWYgKCF0aGlzLmdhbWVPdmVyKSB7XG4gICAgICBpZiAoY29tcHV0ZXIubXlUdXJuKSBjb21wdXRlci5nZW5lcmF0ZUFpTW92ZSgpO1xuICAgICAgdGhpcy5jYWxjdWxhdGVHYW1lT3ZlcigpO1xuICAgIH1cbiAgfVxuXG4gIGNhbGN1bGF0ZUdhbWVPdmVyKCkge1xuICAgIGNvbnN0IGh1bWFuID0gdGhpcy5wbGF5ZXJPbmU7XG4gICAgY29uc3QgY29tcHV0ZXIgPSB0aGlzLnBsYXllclR3bztcblxuICAgIGlmIChjb21wdXRlci5nYW1lYm9hcmQuYWxsU3Vuaykge1xuICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgICB0aGlzLmFubm91bmNlR2FtZU92ZXIoaHVtYW4sIGNvbXB1dGVyKTtcbiAgICB9IGVsc2UgaWYgKGh1bWFuLmdhbWVib2FyZC5hbGxTdW5rKSB7XG4gICAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgICAgIHRoaXMuYW5ub3VuY2VHYW1lT3Zlcihjb21wdXRlciwgaHVtYW4pO1xuICAgIH1cbiAgfVxuXG4gIGFubm91bmNlR2FtZU92ZXIod2lubmVyLCBsb3Nlcikge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWUtb3Zlci1tb2RhbFwiKTtcblxuICAgICAgY29uc3Qgd2lubmVyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2lubmVyLXRleHRcIik7ICBcbiAgICAgIHdpbm5lclRleHQudGV4dENvbnRlbnQgPSBgJHt3aW5uZXIubmFtZX0gd29uIGluICR7d2lubmVyLnRvdGFsTW92ZXN9IG1vdmVzIHdpdGggJHt3aW5uZXIuZ2FtZWJvYXJkLnJlbWFpbmluZ1NoaXBzfSByZW1haW5pbmcgc2hpcHMuYDtcblxuICAgICAgbW9kYWwuc2hvd01vZGFsKCk7XG4gICAgfSwgNTAwKTtcbiAgfVxufSIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgR2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5cbmxldCBnYW1lO1xuXG5mdW5jdGlvbiByZW5kZXJTdGFydFBhZ2UoKSB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcblxuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIndyYXBwZXJcIik7XG5cbiAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBibG9jay5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImJsb2NrXCIpO1xuXG4gIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gIGhlYWRpbmcudGV4dENvbnRlbnQgPSBcIkJhdHRsZXNoaXBcIjtcblxuICBjb25zdCBuZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgbmV3R2FtZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5ldy1nYW1lLWJ1dHRvblwiKTtcbiAgbmV3R2FtZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiTmV3IEdhbWVcIjtcbiAgbmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgZ2FtZSA9IG5ldyBHYW1lKCk7XG4gICAgZ2FtZS5wbGF5ZXJPbmUuZ2FtZWJvYXJkLmdlbmVyYXRlU2hpcHMoWzUsIDQsIDMsIDMsIDJdKTtcbiAgICBnYW1lLnBsYXllclR3by5nYW1lYm9hcmQuZ2VuZXJhdGVTaGlwcyhbNSwgNCwgMywgMywgMl0pO1xuICAgIGdhbWUucGxheUdhbWUoKTtcbiAgICByZW5kZXJHYW1lKCk7XG4gIH0pO1xuXG4gIGJsb2NrLmFwcGVuZChoZWFkaW5nLCBuZXdHYW1lQnV0dG9uKTtcbiAgd3JhcHBlci5hcHBlbmQoYmxvY2spO1xuICBib2R5LmFwcGVuZCh3cmFwcGVyKTtcbn1cblxuLy8gUmVuZGVyIGdhbWUgZGlzcGxheVxuZnVuY3Rpb24gcmVuZGVyR2FtZSgpIHtcbiAgLy8gRW1wdHkgd3JhcHBlclxuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3cmFwcGVyXCIpO1xuICBcbiAgd2hpbGUgKHdyYXBwZXIuZmlyc3RDaGlsZCkge1xuICAgIHdyYXBwZXIucmVtb3ZlQ2hpbGQod3JhcHBlci5maXJzdENoaWxkKTtcbiAgfVxuXG4gIGNvbnN0IHBsYXllck9uZUJvYXJkID0gcmVuZGVyUGxheWVyQm9hcmQoZ2FtZS5wbGF5ZXJPbmUpO1xuICBjb25zdCBwbGF5ZXJUd29Cb2FyZCA9IHJlbmRlclBsYXllckJvYXJkKGdhbWUucGxheWVyVHdvKTtcblxuICBjb25zdCBtb2RhbCA9IHJlbmRlck1vZGFsKCk7XG4gIFxuICB3cmFwcGVyLmFwcGVuZChwbGF5ZXJPbmVCb2FyZCwgcGxheWVyVHdvQm9hcmQsIG1vZGFsKTtcbn1cblxuLy8gUmVuZGVyIChoaWRkZW4pIG1vZGFsIHRvIGRpc3BsYXkgd2hlbiBnYW1lIGZpbmlzaGVzXG5mdW5jdGlvbiByZW5kZXJNb2RhbCgpIHtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGlhbG9nXCIpO1xuICBtb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImdhbWUtb3Zlci1tb2RhbFwiKTtcblxuICBjb25zdCBnYW1lT3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgZ2FtZU92ZXIudGV4dENvbnRlbnQgPSBcIkdhbWUgT3ZlciFcIjtcblxuICBjb25zdCB3aW5uZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICB3aW5uZXJUZXh0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwid2lubmVyLXRleHRcIik7XG4gIFxuICBjb25zdCBuZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgbmV3R2FtZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5ldy1nYW1lLWJ1dHRvblwiKTtcbiAgbmV3R2FtZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiTmV3IEdhbWVcIjtcbiAgbmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWUtb3Zlci1tb2RhbFwiKTtcbiAgICBnYW1lID0gbmV3IEdhbWUoKTtcbiAgICBnYW1lLnBsYXllck9uZS5nYW1lYm9hcmQuZ2VuZXJhdGVTaGlwcyhbNSwgNCwgMywgMywgMl0pO1xuICAgIGdhbWUucGxheWVyVHdvLmdhbWVib2FyZC5nZW5lcmF0ZVNoaXBzKFs1LCA0LCAzLCAzLCAyXSk7XG4gICAgZ2FtZS5wbGF5R2FtZSgpO1xuICAgIHJlbmRlckdhbWUoKTtcbiAgfSk7XG5cbiAgbW9kYWwuYXBwZW5kKGdhbWVPdmVyLCB3aW5uZXJUZXh0LCBuZXdHYW1lQnV0dG9uKTtcblxuICByZXR1cm4gbW9kYWw7XG59XG5cbi8vIFJlbmRlciBwbGF5ZXIgYm9hcmRcbmZ1bmN0aW9uIHJlbmRlclBsYXllckJvYXJkKHBsYXllcikge1xuICBjb25zdCBibG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJsb2NrLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiYmxvY2tcIik7XG4gIGJsb2NrLnNldEF0dHJpYnV0ZShcImlkXCIsIHBsYXllci5uYW1lLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnJykudG9Mb3dlckNhc2UoKSk7XG5cbiAgY29uc3QgcGxheWVyTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgcGxheWVyTmFtZS50ZXh0Q29udGVudCA9IHBsYXllci5uYW1lO1xuXG4gIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYm9hcmQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJnYW1lYm9hcmRcIik7XG5cbiAgY29uc3QgZGltZW5zaW9ucyA9IHBsYXllci5nYW1lYm9hcmQuZGltZW5zaW9ucztcblxuICBmb3IgKGxldCBpPTA7IGk8ZGltZW5zaW9uczsgaSs9MSkge1xuICAgIGZvciAobGV0IGo9MDsgajxkaW1lbnNpb25zOyBqKz0xKSB7XG4gICAgICBjb25zdCBjZWxsUmVmZXJlbmNlID0gcGxheWVyLmdhbWVib2FyZC5ib2FyZFtpXVtqXTtcblxuICAgICAgY29uc3QgY2VsbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjZWxsXCIpO1xuICAgICAgY2VsbEVsZW1lbnQuZGF0YXNldC5jb29yZGluYXRlcyA9IGAke2l9LCR7an1gO1xuXG4gICAgICBpZiAocGxheWVyLmlzQ29tcHV0ZXIgPT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChjZWxsUmVmZXJlbmNlLmhhc1NoaXApIHtcbiAgICAgICAgICBjZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGFzLXNoaXBcIik7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuZGF0YXNldC5zaGlwID0gY2VsbFJlZmVyZW5jZS5zaGlwSWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBsYXllci5pc0NvbXB1dGVyID09PSB0cnVlKSB7XG4gICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgIHBsYXllci5vcHBvbmVudC5hdHRhY2tPcHBvbmVudChbaSwgal0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGJvYXJkLmFwcGVuZChjZWxsRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgZGV0YWlscy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImRldGFpbHNcIik7XG5cbiAgY29uc3Qgc2hpcHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gIHNoaXBzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic2hpcHNcIik7XG4gIHNoaXBzLnRleHRDb250ZW50ID0gYFJlbWFpbmluZyBzaGlwczogJHtwbGF5ZXIuZ2FtZWJvYXJkLnNoaXBzLmxlbmd0aH1gO1xuXG4gIGRldGFpbHMuYXBwZW5kKHNoaXBzKTtcblxuICBibG9jay5hcHBlbmQocGxheWVyTmFtZSwgYm9hcmQsIGRldGFpbHMpO1xuICByZXR1cm4gYmxvY2s7XG59XG5cbi8vIFN0YXJ0aW5nIGZ1bmN0aW9uc1xucmVuZGVyU3RhcnRQYWdlKCk7Il0sIm5hbWVzIjpbIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwicHVzaCIsIm1vZHVsZSIsImlkIiwiZXhwb3J0cyIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJuZWVkTGF5ZXIiLCJjb25jYXQiLCJsZW5ndGgiLCJqb2luIiwiaSIsIm1vZHVsZXMiLCJtZWRpYSIsImRlZHVwZSIsInN1cHBvcnRzIiwibGF5ZXIiLCJ1bmRlZmluZWQiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiayIsIl9rIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJiYXNlNjQiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwic291cmNlTWFwcGluZyIsInN0eWxlc0luRE9NIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibW9kdWxlc1RvRG9tIiwib3B0aW9ucyIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsImJhc2UiLCJjb3VudCIsImluZGV4QnlJZGVudGlmaWVyIiwib2JqIiwiY3NzIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJhZGRFbGVtZW50U3R5bGUiLCJieUluZGV4Iiwic3BsaWNlIiwiYXBpIiwiZG9tQVBJIiwidXBkYXRlIiwibmV3T2JqIiwicmVtb3ZlIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsImluZGV4IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJtZW1vIiwiaW5zZXJ0Iiwic3R5bGUiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsInN0eWxlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJuYyIsImxvY2FscyIsIlNoaXAiLCJjb25zdHJ1Y3RvciIsImhpdHMiLCJoaXQiLCJpc1N1bmsiLCJHYW1lYm9hcmQiLCJkaW1lbnNpb25zIiwiZWxlbWVudElkIiwiYm9hcmQiLCJnZW5lcmF0ZUJvYXJkIiwic2hpcHMiLCJjb2x1bW4iLCJqIiwiY2VsbCIsIkNlbGwiLCJnZW5lcmF0ZVNoaXBzIiwic2hpcExpc3QiLCJyYW5kQ29vcmRpbmF0ZXMiLCJyYW5kUm90YXRlIiwicGxhY2VtZW50UmVzdWx0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiQm9vbGVhbiIsInJvdW5kIiwiaXNWYWxpZFBsYWNlbWVudCIsInBsYWNlU2hpcCIsIngiLCJ5Iiwic2hpcExlbmd0aCIsImhvcml6b250YWwiLCJoYXNTaGlwIiwic2hpcElkIiwicmVjZWl2ZUF0dGFjayIsImF0dGFja2VkQ2VsbCIsInN1bmsiLCJoaXRTaGlwIiwiYmVlbkF0dGFja2VkIiwiZmluZCIsInNoaXAiLCJyZW5kZXJBdHRhY2siLCJjb29yZGluYXRlcyIsImRvbUNlbGwiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0Iiwic2hpcENlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsImRlbGF5IiwiZm9yRWFjaCIsInNldFRpbWVvdXQiLCJ0ZXh0Q29udGVudCIsInJlbWFpbmluZ1NoaXBzIiwiZmlsdGVyIiwiYWxsU3VuayIsImV2ZXJ5IiwiUGxheWVyIiwibmFtZSIsIm15VHVybiIsIm5hbWVJZCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImdhbWVib2FyZCIsIm9wcG9uZW50IiwicHJldmlvdXNNb3ZlcyIsIlNldCIsImlzQ29tcHV0ZXIiLCJhdHRhY2tPcHBvbmVudCIsIm1heCIsImdlbmVyYXRlQWlNb3ZlIiwicmFuZG9tQ29vcmRzIiwiaGFzIiwidG90YWxNb3ZlcyIsImNlbGxzIiwiZmxhdCIsIkdhbWUiLCJwbGF5ZXJPbmUiLCJwbGF5ZXJUd28iLCJnYW1lT3ZlciIsInBsYXlHYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXlUdXJuIiwiY29tcHV0ZXIiLCJjYWxjdWxhdGVHYW1lT3ZlciIsImh1bWFuIiwiYW5ub3VuY2VHYW1lT3ZlciIsIndpbm5lciIsImxvc2VyIiwibW9kYWwiLCJzaG93TW9kYWwiLCJnYW1lIiwicmVuZGVyR2FtZSIsIndyYXBwZXIiLCJwbGF5ZXJPbmVCb2FyZCIsInJlbmRlclBsYXllckJvYXJkIiwicGxheWVyVHdvQm9hcmQiLCJ3aW5uZXJUZXh0IiwibmV3R2FtZUJ1dHRvbiIsImV2ZW50IiwiYXBwZW5kIiwicmVuZGVyTW9kYWwiLCJwbGF5ZXIiLCJibG9jayIsInBsYXllck5hbWUiLCJjZWxsUmVmZXJlbmNlIiwiY2VsbEVsZW1lbnQiLCJkZXRhaWxzIiwiYm9keSIsImhlYWRpbmciLCJyZW5kZXJTdGFydFBhZ2UiXSwic291cmNlUm9vdCI6IiJ9